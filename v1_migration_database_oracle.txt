--WITH DBA
create user webapp identified by parola01;
grant DB_DEVELOPER_ROLE to WEBAPP;
grant execute on Dbms_Session to webapp;
ALTER USER WEBAPP QUOTA UNLIMITED ON USERS;
ALTER USER WEBAPP DEFAULT TABLESPACE USERS;

create user FLYWAY_WEBAPP identified by parola01;
grant DB_DEVELOPER_ROLE to FLYWAY_WEBAPP;
ALTER USER FLYWAY_WEBAPP QUOTA UNLIMITED ON USERS;
ALTER USER FLYWAY_WEBAPP DEFAULT TABLESPACE USERS;
grant execute on Dbms_Session to FLYWAY_WEBAPP;

--WITH USER WEBAPP
create or replace package webapp.DATABSE_CONNECTION_CONTEXT is
 procedure set_connection_context (p_username in varchar2);
end;
create or replace package body webapp.DATABSE_CONNECTION_CONTEXT is
  procedure set_connection_context (p_username in varchar2) is
  begin
    DBMS_SESSION.set_context(namespace => 'WEBAPP_CTX', attribute => 'USERNAME', value => p_username);
  end set_connection_context;
end;
CREATE CONTEXT WEBAPP_CTX USING webapp.DATABSE_CONNECTION_CONTEXT;